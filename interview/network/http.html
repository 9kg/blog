<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.48">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/logo.png"><title>HTTP | 9kg小馆</title><meta name="description" content="这是我的学习分享记录!">
    <link rel="modulepreload" href="/blog/assets/app.91a036f7.js"><link rel="modulepreload" href="/blog/assets/http.html.7c80da7e.js"><link rel="modulepreload" href="/blog/assets/http.html.25f97e8c.js"><link rel="prefetch" href="/blog/assets/index.html.08e720d3.js"><link rel="prefetch" href="/blog/assets/index.html.da919332.js"><link rel="prefetch" href="/blog/assets/你不知道的JavaScript.html.4fc1a8ec.js"><link rel="prefetch" href="/blog/assets/大话数据结构.html.278176f4.js"><link rel="prefetch" href="/blog/assets/index.html.de7ce4eb.js"><link rel="prefetch" href="/blog/assets/index.html.b71a20f2.js"><link rel="prefetch" href="/blog/assets/0.html.1a15f30d.js"><link rel="prefetch" href="/blog/assets/1.html.f8dc9d29.js"><link rel="prefetch" href="/blog/assets/2.html.cfffe158.js"><link rel="prefetch" href="/blog/assets/3.html.4b006938.js"><link rel="prefetch" href="/blog/assets/4.html.fc4c2ca2.js"><link rel="prefetch" href="/blog/assets/5.html.c6138068.js"><link rel="prefetch" href="/blog/assets/6.html.0ce19a0c.js"><link rel="prefetch" href="/blog/assets/7.html.741f5d4f.js"><link rel="prefetch" href="/blog/assets/diff.html.14a287a4.js"><link rel="prefetch" href="/blog/assets/curry.html.5bea554e.js"><link rel="prefetch" href="/blog/assets/cdn.html.aa1e2834.js"><link rel="prefetch" href="/blog/assets/dns.html.599f4020.js"><link rel="prefetch" href="/blog/assets/http2.0.html.8ed6bee2.js"><link rel="prefetch" href="/blog/assets/https.html.26d3236a.js"><link rel="prefetch" href="/blog/assets/tcp.html.410d1e8b.js"><link rel="prefetch" href="/blog/assets/csrf.html.efbbc9f2.js"><link rel="prefetch" href="/blog/assets/xss.html.21751fbd.js"><link rel="prefetch" href="/blog/assets/index.html.703f1a04.js"><link rel="prefetch" href="/blog/assets/冒泡.html.75fc451a.js"><link rel="prefetch" href="/blog/assets/堆.html.a5d286d8.js"><link rel="prefetch" href="/blog/assets/希尔.html.dab0d9e5.js"><link rel="prefetch" href="/blog/assets/归并.html.e48cd390.js"><link rel="prefetch" href="/blog/assets/快排.html.6b6b65f7.js"><link rel="prefetch" href="/blog/assets/桶.html.de161b1b.js"><link rel="prefetch" href="/blog/assets/直接插入.html.4ce29728.js"><link rel="prefetch" href="/blog/assets/简单选择.html.262f660f.js"><link rel="prefetch" href="/blog/assets/鸡尾酒.html.776d86a4.js"><link rel="prefetch" href="/blog/assets/404.html.4caccefc.js"><link rel="prefetch" href="/blog/assets/index.html.5a56bf38.js"><link rel="prefetch" href="/blog/assets/index.html.187a71a3.js"><link rel="prefetch" href="/blog/assets/你不知道的JavaScript.html.975233ee.js"><link rel="prefetch" href="/blog/assets/大话数据结构.html.ea3714ef.js"><link rel="prefetch" href="/blog/assets/index.html.9f896238.js"><link rel="prefetch" href="/blog/assets/index.html.3cb8c305.js"><link rel="prefetch" href="/blog/assets/0.html.2945575f.js"><link rel="prefetch" href="/blog/assets/1.html.02af45bd.js"><link rel="prefetch" href="/blog/assets/2.html.b5c5d3f5.js"><link rel="prefetch" href="/blog/assets/3.html.ec0075f1.js"><link rel="prefetch" href="/blog/assets/4.html.b41d2276.js"><link rel="prefetch" href="/blog/assets/5.html.d0a8e630.js"><link rel="prefetch" href="/blog/assets/6.html.9ca9b19a.js"><link rel="prefetch" href="/blog/assets/7.html.e81937e2.js"><link rel="prefetch" href="/blog/assets/diff.html.e435ef89.js"><link rel="prefetch" href="/blog/assets/curry.html.8033be63.js"><link rel="prefetch" href="/blog/assets/cdn.html.d15ba2f1.js"><link rel="prefetch" href="/blog/assets/dns.html.88639efa.js"><link rel="prefetch" href="/blog/assets/http2.0.html.d7794d9c.js"><link rel="prefetch" href="/blog/assets/https.html.d869c6f1.js"><link rel="prefetch" href="/blog/assets/tcp.html.56906396.js"><link rel="prefetch" href="/blog/assets/csrf.html.7873b1aa.js"><link rel="prefetch" href="/blog/assets/xss.html.2ec64dae.js"><link rel="prefetch" href="/blog/assets/index.html.58a02e31.js"><link rel="prefetch" href="/blog/assets/冒泡.html.2a50ecdd.js"><link rel="prefetch" href="/blog/assets/堆.html.40f12aa3.js"><link rel="prefetch" href="/blog/assets/希尔.html.0c612a9d.js"><link rel="prefetch" href="/blog/assets/归并.html.022514f8.js"><link rel="prefetch" href="/blog/assets/快排.html.d291289b.js"><link rel="prefetch" href="/blog/assets/桶.html.6e61394b.js"><link rel="prefetch" href="/blog/assets/直接插入.html.cfe29241.js"><link rel="prefetch" href="/blog/assets/简单选择.html.ea670a5a.js"><link rel="prefetch" href="/blog/assets/鸡尾酒.html.fad0f4cf.js"><link rel="prefetch" href="/blog/assets/404.html.31603151.js"><link rel="prefetch" href="/blog/assets/404.e4846686.js"><link rel="prefetch" href="/blog/assets/Layout.880ac7f5.js"><link rel="prefetch" href="/blog/assets/giscus.es.4b119d67.js"><link rel="prefetch" href="/blog/assets/lg-fullscreen.es5.0d2ccb81.js"><link rel="prefetch" href="/blog/assets/lg-fullscreen.05aaf9c4.js"><link rel="prefetch" href="/blog/assets/lg-pager.es5.6de7a94f.js"><link rel="prefetch" href="/blog/assets/lg-pager.f31088f4.js"><link rel="prefetch" href="/blog/assets/lg-rotate.es5.86d68b76.js"><link rel="prefetch" href="/blog/assets/lg-rotate.43e944d6.js"><link rel="prefetch" href="/blog/assets/lg-thumbnail.es5.84e63e06.js"><link rel="prefetch" href="/blog/assets/lg-thumbnail.75802ee6.js"><link rel="prefetch" href="/blog/assets/lg-zoom.es5.024db825.js"><link rel="prefetch" href="/blog/assets/lg-zoom.ffc0d8bb.js">
    <link rel="stylesheet" href="/blog/assets/style.cb75b46e.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container" data-v-29a2271e><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="切换侧边栏" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/blog/" class=""><!----><span class="site-name can-hide">9kg小馆</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/9kg/blog" rel="noopener noreferrer" target="_blank" aria-label="访问Github"><!--[--><!--]--> 访问Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">新窗口打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="昼夜交替"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/9kg/blog" rel="noopener noreferrer" target="_blank" aria-label="访问Github"><!--[--><!--]--> 访问Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">新窗口打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">网络 <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/blog/interview/network/tcp.html" class="sidebar-item" aria-label="TCP"><!--[--><!--]--> TCP <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/interview/network/http.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="HTTP"><!--[--><!--]--> HTTP <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/interview/network/http.html#网络协议分层-经典五层模型" class="router-link-active router-link-exact-active sidebar-item" aria-label="网络协议分层--经典五层模型"><!--[--><!--]--> 网络协议分层--经典五层模型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/interview/network/http.html#http报文结构" class="router-link-active router-link-exact-active sidebar-item" aria-label="HTTP报文结构"><!--[--><!--]--> HTTP报文结构 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/interview/network/http.html#请求报文" class="router-link-active router-link-exact-active sidebar-item" aria-label="请求报文"><!--[--><!--]--> 请求报文 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/interview/network/http.html#响应报文" class="router-link-active router-link-exact-active sidebar-item" aria-label="响应报文"><!--[--><!--]--> 响应报文 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/interview/network/http.html#结构描述" class="router-link-active router-link-exact-active sidebar-item" aria-label="结构描述"><!--[--><!--]--> 结构描述 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog/interview/network/http.html#请求方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="请求方法"><!--[--><!--]--> 请求方法 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/interview/network/http.html#get和post的区别" class="router-link-active router-link-exact-active sidebar-item" aria-label="GET和POST的区别"><!--[--><!--]--> GET和POST的区别 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog/interview/network/http.html#uri" class="router-link-active router-link-exact-active sidebar-item" aria-label="URI"><!--[--><!--]--> URI <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/interview/network/http.html#编码" class="router-link-active router-link-exact-active sidebar-item" aria-label="编码"><!--[--><!--]--> 编码 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog/interview/network/http.html#http状态码" class="router-link-active router-link-exact-active sidebar-item" aria-label="HTTP状态码"><!--[--><!--]--> HTTP状态码 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/interview/network/http.html#常用状态码" class="router-link-active router-link-exact-active sidebar-item" aria-label="常用状态码"><!--[--><!--]--> 常用状态码 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog/interview/network/http.html#http特点" class="router-link-active router-link-exact-active sidebar-item" aria-label="HTTP特点"><!--[--><!--]--> HTTP特点 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/interview/network/http.html#http缺点" class="router-link-active router-link-exact-active sidebar-item" aria-label="HTTP缺点"><!--[--><!--]--> HTTP缺点 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/interview/network/http.html#accept字段" class="router-link-active router-link-exact-active sidebar-item" aria-label="Accept字段"><!--[--><!--]--> Accept字段 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/interview/network/http.html#数据格式" class="router-link-active router-link-exact-active sidebar-item" aria-label="数据格式"><!--[--><!--]--> 数据格式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/interview/network/http.html#压缩方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="压缩方式"><!--[--><!--]--> 压缩方式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/interview/network/http.html#支持语言" class="router-link-active router-link-exact-active sidebar-item" aria-label="支持语言"><!--[--><!--]--> 支持语言 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/interview/network/http.html#字符集" class="router-link-active router-link-exact-active sidebar-item" aria-label="字符集"><!--[--><!--]--> 字符集 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog/interview/network/http.html#如何传输定长的数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="如何传输定长的数据"><!--[--><!--]--> 如何传输定长的数据 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/interview/network/http.html#如何传输不定长的数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="如何传输不定长的数据"><!--[--><!--]--> 如何传输不定长的数据 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/interview/network/http.html#http如何处理大文件的传输" class="router-link-active router-link-exact-active sidebar-item" aria-label="HTTP如何处理大文件的传输"><!--[--><!--]--> HTTP如何处理大文件的传输 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/interview/network/http.html#如何处理表单数据的提交" class="router-link-active router-link-exact-active sidebar-item" aria-label="如何处理表单数据的提交"><!--[--><!--]--> 如何处理表单数据的提交 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/interview/network/http.html#如何解决队头阻塞问题" class="router-link-active router-link-exact-active sidebar-item" aria-label="如何解决队头阻塞问题"><!--[--><!--]--> 如何解决队头阻塞问题 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/interview/network/http.html#什么是队头阻塞" class="router-link-active router-link-exact-active sidebar-item" aria-label="什么是队头阻塞"><!--[--><!--]--> 什么是队头阻塞 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/interview/network/http.html#如何解决" class="router-link-active router-link-exact-active sidebar-item" aria-label="如何解决"><!--[--><!--]--> 如何解决 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog/interview/network/http.html#cookie" class="router-link-active router-link-exact-active sidebar-item" aria-label="Cookie"><!--[--><!--]--> Cookie <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/interview/network/http.html#有效期" class="router-link-active router-link-exact-active sidebar-item" aria-label="有效期"><!--[--><!--]--> 有效期 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/interview/network/http.html#作用域" class="router-link-active router-link-exact-active sidebar-item" aria-label="作用域"><!--[--><!--]--> 作用域 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/interview/network/http.html#安全相关" class="router-link-active router-link-exact-active sidebar-item" aria-label="安全相关"><!--[--><!--]--> 安全相关 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/interview/network/http.html#缺点" class="router-link-active router-link-exact-active sidebar-item" aria-label="缺点"><!--[--><!--]--> 缺点 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog/interview/network/http.html#http-代理" class="router-link-active router-link-exact-active sidebar-item" aria-label="HTTP 代理"><!--[--><!--]--> HTTP 代理 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/interview/network/http.html#代理的功能" class="router-link-active router-link-exact-active sidebar-item" aria-label="代理的功能"><!--[--><!--]--> 代理的功能 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog/interview/network/http.html#http缓存及缓存代理" class="router-link-active router-link-exact-active sidebar-item" aria-label="HTTP缓存及缓存代理"><!--[--><!--]--> HTTP缓存及缓存代理 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/interview/network/http.html#http缓存" class="router-link-active router-link-exact-active sidebar-item" aria-label="HTTP缓存"><!--[--><!--]--> HTTP缓存 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/interview/network/http.html#为什么需要代理缓存" class="router-link-active router-link-exact-active sidebar-item" aria-label="为什么需要代理缓存"><!--[--><!--]--> 为什么需要代理缓存 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/blog/interview/network/https.html" class="sidebar-item" aria-label="HTTPS"><!--[--><!--]--> HTTPS <!--[--><!--]--></a><!----></li><li><a href="/blog/interview/network/http2.0.html" class="sidebar-item" aria-label="HTTP2.0"><!--[--><!--]--> HTTP2.0 <!--[--><!--]--></a><!----></li><li><a href="/blog/interview/network/dns.html" class="sidebar-item" aria-label="DNS"><!--[--><!--]--> DNS <!--[--><!--]--></a><!----></li><li><a href="/blog/interview/network/cdn.html" class="sidebar-item" aria-label="CDN"><!--[--><!--]--> CDN <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">算法 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/blog/interview/algorithm/sort/index.md" class="sidebar-item collapsible" aria-label="排序"><!--[--><!--]--> 排序 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/blog/interview/algorithm/sort/%E5%86%92%E6%B3%A1.html" class="sidebar-item" aria-label="冒泡排序（Bubble Sort）"><!--[--><!--]--> 冒泡排序（Bubble Sort） <!--[--><!--]--></a><!----></li><li><a href="/blog/interview/algorithm/sort/%E7%AE%80%E5%8D%95%E9%80%89%E6%8B%A9.html" class="sidebar-item" aria-label="简单选择"><!--[--><!--]--> 简单选择 <!--[--><!--]--></a><!----></li><li><a href="/blog/interview/algorithm/sort/%E7%9B%B4%E6%8E%A5%E6%8F%92%E5%85%A5.html" class="sidebar-item" aria-label="直接插入"><!--[--><!--]--> 直接插入 <!--[--><!--]--></a><!----></li><li><a href="/blog/interview/algorithm/sort/%E5%B8%8C%E5%B0%94.html" class="sidebar-item" aria-label="希尔"><!--[--><!--]--> 希尔 <!--[--><!--]--></a><!----></li><li><a href="/blog/interview/algorithm/sort/%E5%A0%86.html" class="sidebar-item" aria-label="堆"><!--[--><!--]--> 堆 <!--[--><!--]--></a><!----></li><li><a href="/blog/interview/algorithm/sort/%E5%BD%92%E5%B9%B6.html" class="sidebar-item" aria-label="归并"><!--[--><!--]--> 归并 <!--[--><!--]--></a><!----></li><li><a href="/blog/interview/algorithm/sort/%E5%BF%AB%E6%8E%92.html" class="sidebar-item" aria-label="快排"><!--[--><!--]--> 快排 <!--[--><!--]--></a><!----></li><li><a href="/blog/interview/algorithm/sort/%E9%B8%A1%E5%B0%BE%E9%85%92.html" class="sidebar-item" aria-label="鸡尾酒"><!--[--><!--]--> 鸡尾酒 <!--[--><!--]--></a><!----></li><li><a href="/blog/interview/algorithm/sort/%E6%A1%B6.html" class="sidebar-item" aria-label="桶"><!--[--><!--]--> 桶 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/blog/interview/algorithm/diff.html" class="sidebar-item" aria-label="diff"><!--[--><!--]--> diff <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">安全 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/blog/interview/security/xss.html" class="sidebar-item" aria-label="XSS"><!--[--><!--]--> XSS <!--[--><!--]--></a><!----></li><li><a href="/blog/interview/security/csrf.html" class="sidebar-item" aria-label="CSRF"><!--[--><!--]--> CSRF <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--[--><div class="reading-time" data-v-29a2271e> 全文共<span class="reading-time-number" data-v-29a2271e>3749</span>字，预计耗时<span class="reading-time-number" data-v-29a2271e>19分钟</span>。 </div><!--]--><!--]--><div><h1 id="http" tabindex="-1"><a class="header-anchor" href="#http" aria-hidden="true">#</a> HTTP</h1><blockquote><p>超文本传输协议（Hyper Text Transfer Protocol，HTTP）是一个简单的请求-响应协议，它通常运行在TCP之上。</p></blockquote><h2 id="网络协议分层-经典五层模型" tabindex="-1"><a class="header-anchor" href="#网络协议分层-经典五层模型" aria-hidden="true">#</a> 网络协议分层--经典五层模型</h2><ol><li>物理层：定义物理设备之间如何传输数据</li><li>数据链路层：在通信的实体间建立数据链路链接</li><li>网络层：为数据在节点之间的传输创建逻辑链路，并分组转发数据</li><li>传输层：向用户提供可靠的端到端的服务，传输层通过封装向高层屏蔽了下层数据通信的细节</li><li>应用层：为应用软件提供了很多服务，构建于tcp协议之上，屏蔽了网络传输相关的细节</li></ol><h2 id="http报文结构" tabindex="-1"><a class="header-anchor" href="#http报文结构" aria-hidden="true">#</a> HTTP报文结构</h2><p>对于TCP而言，在传输时分为两个部分: TCP头和数据部分<br> 而HTTP类似，也是<code>header</code>+<code>body</code>的结构，除此之外，请求报文和响应报文有一定差异。</p><h3 id="请求报文" tabindex="-1"><a class="header-anchor" href="#请求报文" aria-hidden="true">#</a> 请求报文</h3><p><img src="/blog/assets/request-format.3fb45d8c.png" alt="请求报文"></p><h3 id="响应报文" tabindex="-1"><a class="header-anchor" href="#响应报文" aria-hidden="true">#</a> 响应报文</h3><p><img src="/blog/assets/response-format.8986ea71.png" alt="响应报文"></p><h3 id="结构描述" tabindex="-1"><a class="header-anchor" href="#结构描述" aria-hidden="true">#</a> 结构描述</h3><h4 id="头部字段名格式要求" tabindex="-1"><a class="header-anchor" href="#头部字段名格式要求" aria-hidden="true">#</a> 头部字段名格式要求</h4><ul><li>不区分大小写</li><li>不允许出现空格</li><li>不可以出现下划线<code>_</code></li><li>后面必须紧跟着<code>:</code></li></ul><h4 id="空行" tabindex="-1"><a class="header-anchor" href="#空行" aria-hidden="true">#</a> 空行</h4><p>区分头部和实体</p><h4 id="实体" tabindex="-1"><a class="header-anchor" href="#实体" aria-hidden="true">#</a> 实体</h4><p>body部分，请求报文对应请求体，响应报文对应响应体。</p><h2 id="请求方法" tabindex="-1"><a class="header-anchor" href="#请求方法" aria-hidden="true">#</a> 请求方法</h2><div class="custom-container tip"><p class="custom-container-title">提示</p><p>方法名都是大写</p></div><ul><li><code>HEAD</code>: 获取数据元信息</li><li><code>GET</code>: 获取数据</li><li><code>POST</code>: 提交数据</li><li><code>PUT</code>: 修改数据</li><li><code>DELETE</code>: 删除数据</li><li><code>CONNECT</code>: 建立连接隧道，用于代理服务器</li><li><code>OPTIONS</code>: 列出可用的请求方法，用于跨域请求</li><li><code>TRACE</code>: 追踪请求-响应的传输路径</li></ul><h3 id="get和post的区别" tabindex="-1"><a class="header-anchor" href="#get和post的区别" aria-hidden="true">#</a> GET和POST的区别</h3><h4 id="本质上的区别" tabindex="-1"><a class="header-anchor" href="#本质上的区别" aria-hidden="true">#</a> 本质上的区别:</h4><ul><li><strong>语义</strong></li><li><strong>幂等性</strong>: <code>GET</code> 幂等，而 <code>POST</code> 不是</li></ul><h4 id="基于浏览器来看的区别" tabindex="-1"><a class="header-anchor" href="#基于浏览器来看的区别" aria-hidden="true">#</a> 基于浏览器来看的区别:</h4><ul><li><strong>缓存</strong>: 浏览器会主动缓存 <code>GET</code> 请求</li><li><strong>参数</strong>: 浏览器中的GET无请求体，因而参数只能存在于URL中 <ul><li>受制于URL，参数长度有限</li><li>受制于URL，只能接收ASCII字符，否则需要经过URI编码</li></ul></li><li><strong>发包次数</strong>: 从<strong>TCP</strong>的角度，GET请求一般会将请求报文一次性发送出去，而POST会分为2个TCP数据包，先发header部分，如果服务器响应100（continue），然后发body部分。（火狐除外，它的POST只发一个TCP包）</li></ul><h2 id="uri" tabindex="-1"><a class="header-anchor" href="#uri" aria-hidden="true">#</a> URI</h2><blockquote><p>统一资源标识符（Uniform Resource Identifier），用于区分互联网上不同的资源。</p></blockquote><p><img src="/blog/assets/uri-format.83970955.png" alt="URI结构"></p><ul><li><code>scheme://</code>: 表示协议名，比如http，https，ftp，file等等。后面必须和<code>://</code>连在一起。</li><li><code>user:passwd@</code>: 表示登录主机时的用户信息，亦有这样的用法-<code>access_token@</code>。</li><li><code>host:port</code>: 表示主机名和端口。</li><li><code>path</code>: 表示请求路径，标记资源所在位置。</li><li><code>?query</code>: 表示查询参数，为key=value这种形式，多个键值对之间用<code>&amp;</code>隔开。</li><li><code>#fragment</code>: 表示<code>URI</code>所定位的资源内的一个锚点，浏览器可以根据这个锚点跳转到对应的位置。</li></ul><h3 id="编码" tabindex="-1"><a class="header-anchor" href="#编码" aria-hidden="true">#</a> 编码</h3><p><strong>URI</strong>只能使用<code>ASCII</code>, ASCII之外的字符是不支持显示的，且部分符号是界定符，如果不处理就会导致解析出错。<br> 因此，URI引入了编码机制，将所有界定符和非ASCII码字符转为十六进制字节值，然后在前面加个<code>%</code>。</p><blockquote><p>比如，<code>%</code>被转义成<code>%25</code>，<code>[</code>被转义成<code>%5B</code>，<code>{</code>被转义成<code>%7B</code>，<code>好好学习</code>被转义成<code>%E5%A5%BD%E5%A5%BD%E5%AD%A6%E4%B9%A0</code></p></blockquote><h2 id="http状态码" tabindex="-1"><a class="header-anchor" href="#http状态码" aria-hidden="true">#</a> HTTP状态码</h2><table><thead><tr><th>起始位</th><th>含义</th></tr></thead><tbody><tr><td>1xx</td><td>表示目前是协议处理的中间态，还需要后续操作</td></tr><tr><td>2xx</td><td>表示成功状态</td></tr><tr><td>3xx</td><td>重定向，资源位置发生变化</td></tr><tr><td>4xx</td><td>请求有误</td></tr><tr><td>5xx</td><td>服务端发生错误</td></tr></tbody></table><h3 id="常用状态码" tabindex="-1"><a class="header-anchor" href="#常用状态码" aria-hidden="true">#</a> 常用状态码</h3><table><thead><tr><th>状态码</th><th>状态文本</th><th>描述</th></tr></thead><tbody><tr><td>100</td><td>Continue</td><td>服务器仅接收到部分请求，但是一旦服务器并没有拒绝该请求，客户端应该继续发送其余的请求。</td></tr><tr><td>101</td><td>Switching Protocols</td><td>服务器转换协议：服务器将遵从客户的请求转换到另外一种协议。比如在HTTP升级为WebSocket的时候，如果服务器同意变更，就会发送状态码<code>101</code>。</td></tr><tr><td>200</td><td>OK</td><td>请求成功（其后是对GET和POST请求的应答文档。）</td></tr><tr><td>204</td><td>No Content</td><td>没有新文档。含义与 200 相同，但响应头后没有<code>body</code>数据。</td></tr><tr><td>206</td><td>Partial Content</td><td>客户发送了一个带有Range头的GET请求，服务器完成了它。</td></tr><tr><td>301</td><td>Moved Permanently</td><td>永久重定向至新的url</td></tr><tr><td>302</td><td>Found</td><td>临时重定向至新的url</td></tr><tr><td>304</td><td>Not Modified</td><td>协商缓存命中时会返回这个状态码，服务器告诉客户端，原来缓存的文档还可以继续使用</td></tr><tr><td>400</td><td>Bad Request</td><td>服务器未能理解请求</td></tr><tr><td>401</td><td>Unauthorized</td><td>被请求的页面需要用户名和密码</td></tr><tr><td>403</td><td>Forbidden</td><td>对被请求页面的访问被禁止</td></tr><tr><td>404</td><td>Not Found</td><td>服务器无法找到被请求的页面</td></tr><tr><td>405</td><td>Method Not Allowed</td><td>请求中指定的方法不被允许</td></tr><tr><td>413</td><td>Request Entity Too Large</td><td>请求的实体的太大，服务器不会接受请求</td></tr><tr><td>414</td><td>Request-URI Too Long</td><td>请求行里的 URI 太大</td></tr><tr><td>500</td><td>Internal Server Error</td><td>请求未完成。服务器遇到不可预知的情况。</td></tr><tr><td>502</td><td>Bad Gateway</td><td>请求未完成。服务器从上游服务器收到一个无效的响应。</td></tr><tr><td>503</td><td>Service Unavailable</td><td>请求未完成。服务器临时过载或宕机</td></tr><tr><td>504</td><td>Gateway Timeout</td><td>网关超时</td></tr></tbody></table><h2 id="http特点" tabindex="-1"><a class="header-anchor" href="#http特点" aria-hidden="true">#</a> HTTP特点</h2><ul><li><strong>灵活可扩展</strong><ul><li>语义自由：只规定了基本格式，没有严格的语法限制</li><li>传输形式多样性：文本，图片，视频等任意数据</li></ul></li><li><strong>可靠传输</strong>：基于<code>TCP/IP</code>，所以继承了TCP的特性</li><li><strong>请求-应答</strong></li><li><strong>无状态</strong>：每次请求都是独立、无关的，因此通信过程中没有上下文信息</li></ul><h2 id="http缺点" tabindex="-1"><a class="header-anchor" href="#http缺点" aria-hidden="true">#</a> HTTP缺点</h2><ul><li><strong>无状态</strong>：部分场景需要保存大量上下文信息，无状态就是缺点了。</li><li><strong>明文传输</strong></li><li><strong>队头阻塞</strong>：当 http 开启长连接时，共用一个 TCP 连接，同一时刻只能处理一个请求，那么当前请求耗时过长的情况下，其它的请求只能处于阻塞状态。</li></ul><h2 id="accept字段" tabindex="-1"><a class="header-anchor" href="#accept字段" aria-hidden="true">#</a> Accept字段</h2><h3 id="数据格式" tabindex="-1"><a class="header-anchor" href="#数据格式" aria-hidden="true">#</a> 数据格式</h3><p>HTTP 从MIME type取了一部分来标记报文 body 部分的数据类型，这些类型体现在<code>Content-Type</code>这个字段。<br> 当然这是针对于发送端而言，接收端想要收到特定类型的数据，也可以用<code>Accept</code>字段。</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># 发送端</span>
<span class="token key atrule">Content-Type</span><span class="token punctuation">:</span> text/html; charset=utf<span class="token punctuation">-</span><span class="token number">8</span>
<span class="token comment"># 接收端</span>
<span class="token key atrule">Accept-Charset</span><span class="token punctuation">:</span> text/html
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="压缩方式" tabindex="-1"><a class="header-anchor" href="#压缩方式" aria-hidden="true">#</a> 压缩方式</h3><p>一般这些数据都是会进行编码压缩的，采取什么样的压缩方式就体现在了发送方的<code>Content-Encoding</code>字段上。<br> 同样的，接收什么样的压缩方式体现在了接受方的<code>Accept-Encoding</code>字段上。这个字段的取值有下面几种：</p><ul><li><code>gzip</code>: 当今最流行的压缩格式</li><li><code>deflate</code>: 另外一种著名的压缩格式</li><li><code>br</code>: 一种专门为 HTTP 发明的压缩算法</li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># 发送端</span>
<span class="token key atrule">Content-Encoding</span><span class="token punctuation">:</span> gzip
<span class="token comment"># 接收端</span>
<span class="token key atrule">Accept-Encoding</span><span class="token punctuation">:</span> gzip
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="支持语言" tabindex="-1"><a class="header-anchor" href="#支持语言" aria-hidden="true">#</a> 支持语言</h3><p>对于发送方而言，是<code>Content-Language</code>字段，在需要实现国际化的方案当中，可以用来指定支持的语言，在接受方对应的字段为<code>Accept-Language</code>。</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># 发送端</span>
<span class="token key atrule">Content-Language</span><span class="token punctuation">:</span> zh<span class="token punctuation">-</span>CN<span class="token punctuation">,</span> zh<span class="token punctuation">,</span> en
<span class="token comment"># 接收端</span>
<span class="token key atrule">Accept-Language</span><span class="token punctuation">:</span> zh<span class="token punctuation">-</span>CN<span class="token punctuation">,</span> zh<span class="token punctuation">,</span> en
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="字符集" tabindex="-1"><a class="header-anchor" href="#字符集" aria-hidden="true">#</a> 字符集</h3><p>在接收端对应为<code>Accept-Charset</code>，指定可以接受的字符集。<br> 而在发送端并没有对应的<code>Content-Charset</code>, 而是直接放在了<code>Content-Type</code>中，以<code>charset</code>属性指定。</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># 发送端</span>
<span class="token key atrule">Content-Type</span><span class="token punctuation">:</span> text/html; charset=utf<span class="token punctuation">-</span><span class="token number">8</span>
<span class="token comment"># 接收端</span>
<span class="token key atrule">Accept-Charset</span><span class="token punctuation">:</span> charset=utf<span class="token punctuation">-</span><span class="token number">8</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="如何传输定长的数据" tabindex="-1"><a class="header-anchor" href="#如何传输定长的数据" aria-hidden="true">#</a> 如何传输定长的数据</h2><p>对于定长包体而言，发送端在传输的时候一般会带上 Content-Length, 来指明包体的长度。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;request&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url <span class="token operator">===</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;text/plain&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Length&#39;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;helloworld&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;成功启动&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如上服务端代码，在浏览器中将显示<code>helloworld</code><br> 如果将长度设置小， 比如<code>res.setHeader(&#39;Content-Length&#39;, 8);</code>，那么浏览器中的内容将是<code>hellowor</code>。<br> 如果将长度设置大， 比如<code>res.setHeader(&#39;Content-Length&#39;, 18);</code>，那么将直接传输失败。</p><h2 id="如何传输不定长的数据" tabindex="-1"><a class="header-anchor" href="#如何传输不定长的数据" aria-hidden="true">#</a> 如何传输不定长的数据</h2><p>通过如下头部字段：</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">Transfer-Encoding</span><span class="token punctuation">:</span> chunked
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这表示分块传输数据，设置这个字段后会自动产生两个效果:</p><ul><li>Content-Length 字段会被忽略</li><li>基于长连接持续推送动态内容</li></ul><p>服务端示例代码：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;request&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url <span class="token operator">===</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;text/html; charset=utf8&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Length&#39;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Transfer-Encoding&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;chunked&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;p&gt;开始~&lt;/p&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;这是第一次传输&lt;br/&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;这是第二次传输&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">5211</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;成功启动&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>浏览器效果如下：<br><img src="/blog/assets/chunked-demo.f71c2fbb.gif" alt="分块传输示例"></p><h2 id="http如何处理大文件的传输" tabindex="-1"><a class="header-anchor" href="#http如何处理大文件的传输" aria-hidden="true">#</a> HTTP如何处理大文件的传输</h2><p>HTTP 针对这一场景，采取了范围请求的解决方案，允许客户端仅仅请求一个资源的一部分，用来告知客户端这边是支持范围请求的。</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">Accept-Ranges</span><span class="token punctuation">:</span> none
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="如何处理表单数据的提交" tabindex="-1"><a class="header-anchor" href="#如何处理表单数据的提交" aria-hidden="true">#</a> 如何处理表单数据的提交</h2><p>体现在两种不同的Content-Type取值：</p><ul><li><code>application/x-www-form-urlencoded</code>: <ul><li>其中的数据会被编码成以<code>&amp;</code>分隔的键值对</li><li>接着将字符以URL编码方式编码</li></ul></li><li><code>multipart/form-data</code></li></ul><p>实际的场景中，对于图片等文件的上传，基本采用<code>multipart/form-data</code>而不用<code>application/x-www-form-urlencoded</code>。<br> 因为没有必要做 URL 编码，带来巨大耗时的同时也占用了更多的空间。</p><h2 id="如何解决队头阻塞问题" tabindex="-1"><a class="header-anchor" href="#如何解决队头阻塞问题" aria-hidden="true">#</a> 如何解决队头阻塞问题</h2><h3 id="什么是队头阻塞" tabindex="-1"><a class="header-anchor" href="#什么是队头阻塞" aria-hidden="true">#</a> 什么是队头阻塞</h3><p>HTTP 传输是基于请求-应答的模式进行的，报文必须是一发一收。<br> 但值得注意的是，里面的任务被放在一个任务队列中串行执行，一旦队首的请求处理太慢，就会阻塞后面请求的处理。<br> 这就是著名的HTTP队头阻塞问题。</p><h3 id="如何解决" tabindex="-1"><a class="header-anchor" href="#如何解决" aria-hidden="true">#</a> 如何解决</h3><h4 id="并发连接" tabindex="-1"><a class="header-anchor" href="#并发连接" aria-hidden="true">#</a> 并发连接</h4><p>对于一个域名允许分配多个长连接，那么相当于增加了任务队列，不至于一个队伍的任务阻塞其它所有任务。<br> 在RFC2616规定过客户端最多并发 2 个连接，不过事实上在现在的浏览器标准中，这个上限要多很多，Chrome 中是 6 个。</p><h4 id="域名分片" tabindex="-1"><a class="header-anchor" href="#域名分片" aria-hidden="true">#</a> 域名分片</h4><p>一个域名不是可以并发 6 个长连接吗？那我们就多分几个域名。 比如 content1.baidu.com 、content2.baidu.com。 这样一个baidu.com域名下可以分出非常多的二级域名，而它们都指向同样的一台服务器，能够并发的长连接数更多了，事实上也更好地解决了队头阻塞的问题。 除此之外，静态资源使用第三方cdn也基于这个原理缓解了队头阻塞的问题。</p><h2 id="cookie" tabindex="-1"><a class="header-anchor" href="#cookie" aria-hidden="true">#</a> Cookie</h2><h3 id="有效期" tabindex="-1"><a class="header-anchor" href="#有效期" aria-hidden="true">#</a> 有效期</h3><p>Cookie 的有效期可以通过<code>Expires</code>和<code>Max-Age</code>两个属性来设置。</p><ul><li><code>Expires</code>即过期时间</li><li><code>Max-Age</code>用的是一段时间间隔，单位是秒，从浏览器收到报文开始计算。</li></ul><p>若 Cookie 过期，则这个 Cookie 会被删除，并不会发送给服务端。</p><h3 id="作用域" tabindex="-1"><a class="header-anchor" href="#作用域" aria-hidden="true">#</a> 作用域</h3><p>关于作用域也有两个属性: <code>Domain</code>和<code>path</code>, 给 Cookie 绑定了域名和路径。<br> 在发送请求之前，发现域名或者路径和这两个属性不匹配，那么就不会带上 Cookie。<br> 值得注意的是，对于路径来说，<code>/</code>表示域名下的任意路径都允许使用 Cookie。</p><h3 id="安全相关" tabindex="-1"><a class="header-anchor" href="#安全相关" aria-hidden="true">#</a> 安全相关</h3><ul><li>如果带上<code>Secure</code>，说明只能通过HTTPS传输cookie。</li><li>如果Cookie字段带上<code>HttpOnly</code>，那么说明只能通过HTTP协议传输，不能通过JS访问，这也是预防<code>XSS</code>攻击的重要手段。</li><li>相应的，对于<code>CSRF</code>攻击的预防，也有<code>SameSite</code>属性。SameSite可以设置为三个值: <ul><li><code>Strict</code> 浏览器完全禁止第三方请求携带Cookie。比如请求baidu.com网站只能在baidu.com域名当中请求才能携带Cookie，在其他网站请求都不能。</li><li><code>Lax</code> 宽松一点了，但是只能在 get 方法提交表单况或者<code>a</code>标签发送get请求的情况下可以携带Cookie，其他情况均不能。</li><li><code>None</code> 默认模式，请求会自动携带上Cookie。</li></ul></li></ul><h3 id="缺点" tabindex="-1"><a class="header-anchor" href="#缺点" aria-hidden="true">#</a> 缺点</h3><ul><li><strong>体积上限小</strong>: 只有<code>4KB</code>，只能用来存储少量的信息。</li><li><strong>性能</strong>: Cookie 紧跟域名，不管域名下面的某一个地址需不需要这个 Cookie ，请求都会携带上完整的 Cookie，这样随着请求数的增多，其实会造成巨大的性能浪费的，因为请求携带了很多不必要的内容。但可以通过<code>Domain</code>和<code>Path</code>指定作用域来解决。</li><li><strong>安全</strong>: 由于 Cookie 以纯文本的形式在浏览器和服务器中传递，很容易被非法用户截获，然后进行一系列的篡改，在 Cookie 的有效期内重新发送给服务器，这是相当危险的。另外，在HttpOnly为 false 的情况下，Cookie 信息能直接通过 JS 脚本来读取。</li></ul><h2 id="http-代理" tabindex="-1"><a class="header-anchor" href="#http-代理" aria-hidden="true">#</a> HTTP 代理</h2><p>作为代理的服务器相当于一个中间人的角色，对于客户端而言，表现为服务器进行响应；而对于源服务器，表现为客户端发起请求，具有双重身份。</p><h3 id="代理的功能" tabindex="-1"><a class="header-anchor" href="#代理的功能" aria-hidden="true">#</a> 代理的功能</h3><ul><li><strong>负载均衡</strong>: 代理服务器拿到请求之后，可以通过特定的算法分发给不同的源服务器，让各台源服务器的负载尽量平均。</li><li><strong>保障安全</strong>: 利用心跳机制监控后台的服务器，一旦发现故障机就将其踢出集群。并且对于上下行的数据进行过滤，对非法 IP 限流等</li><li><strong>缓存代理</strong>: 将内容缓存到代理服务器，使得客户端可以直接从代理服务器获得而不用到源服务器那里，比如<code>CDN</code>的实现原理</li></ul><h2 id="http缓存及缓存代理" tabindex="-1"><a class="header-anchor" href="#http缓存及缓存代理" aria-hidden="true">#</a> HTTP缓存及缓存代理</h2><h3 id="http缓存" tabindex="-1"><a class="header-anchor" href="#http缓存" aria-hidden="true">#</a> HTTP缓存</h3><p>又叫作浏览器缓存。</p><ul><li>强缓存: 通过<code>Cache-Control</code>验证强缓存是否可用</li><li>协商缓存: 过请求头中的<code>If-Modified-Since</code>或者<code>If-None-Match</code>这些条件请求字段检查资源是否更新</li></ul><p><img src="/blog/assets/http-cache.02024d0c.png" alt="HTTP缓存"></p><h3 id="为什么需要代理缓存" tabindex="-1"><a class="header-anchor" href="#为什么需要代理缓存" aria-hidden="true">#</a> 为什么需要代理缓存</h3><p>对于源服务器来说，它也是有缓存的，比如<code>Redis</code>, <code>Memcache</code>，但对于HTTP缓存来说，如果每次客户端缓存失效都要到源服务器获取，那给源服务器的压力是很大的。<br> 由此引入了缓存代理的机制。让代理服务器接管一部分的服务端HTTP缓存，客户端缓存过期后就近到代理缓存中获取，代理缓存过期了才请求源服务器，这样流量巨大的时候能明显降低源服务器的压力。</p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/9kg/blog/edit/master/docs/interview/network/http.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页"><!--[--><!--]--> 编辑此页 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">新窗口打开</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">最近更新: </span><!----></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/blog/interview/network/tcp.html" class="" aria-label="TCP"><!--[--><!--]--> TCP <!--[--><!--]--></a></span><span class="next"><a href="/blog/interview/network/https.html" class="" aria-label="HTTPS"><!--[--><!--]--> HTTPS <!--[--><!--]--></a></span></p></nav><!--[--><!--[--><div class="giscus-wrapper input-top" style="display:block;" data-v-29a2271e><div style="text-align:center">Loading...</div></div><!--]--><!--]--></main><!--]--></div><!----><div class="lightgallery-vuepress"></div><!--]--></div>
    <script type="module" src="/blog/assets/app.91a036f7.js" defer></script>
  </body>
</html>
